var JAR_PATH,JAVA_PATH,OPTIONS,path,spawn;spawn=require("child_process").spawn;path=require("path");JAVA_PATH=exports.JAVA_PATH="java";JAR_PATH=exports.JAR_PATH=path.join(__dirname,"vendor/yuicompressor.jar");OPTIONS=exports.OPTIONS={type:"js"};exports.compile=function(b,d,g){var c,e,f,a;if(g){a={};Object.keys(OPTIONS).forEach(function(h){return a[h]=OPTIONS[h]});Object.keys(d).forEach(function(h){return a[h]=d[h]});d=a}else{g=d;d=OPTIONS}c=["-jar",JAR_PATH];Object.keys(d).forEach(function(h){if(d[h]===false){return}c.push("--"+h);if(d[h]!==true){return c.push(d[h].toString())}});e=spawn(JAVA_PATH,c);a="";f="";e.stdout.setEncoding("utf8");e.stdout.on("data",function(h){return a+=h});e.stderr.on("data",function(h){return f+=h});e.on("exit",function(i){var h;if(i!==0){h=new Error(f);h.code=i}else{h=null}return g(h,a)});e.stdin.write(b);return e.stdin.end()};